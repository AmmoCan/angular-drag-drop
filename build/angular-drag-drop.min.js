var AngularDragDrop=function(e){function r(n){if(a[n])return a[n].exports;var t=a[n]={exports:{},id:n,loaded:!1};return e[n].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var a={};return r.m=e,r.c=a,r.p="",r(0)}([function(e,r,a){var n=a(1);e.exports=n.module("filearts.dragDrop").factory("$dragging",[function(){var e=null,r=null;return{getData:function(){return e},getType:function(){return r},setData:function(r){return e=r},setType:function(e){return r=e}}}]).directive("dragContainer",[function(){return{restrict:"A",require:"dragContainer",controller:"DragContainerController",controllerAs:"dragContainer",link:function(e,r,a,n){n.init(r),r.on("dragstart",n.handleDragStart.bind(n)),r.on("dragend",n.handleDragEnd.bind(n)),e.$watch(a.dragContainer,n.updateDragData.bind(n)),a.$observe("mimeType",n.updateDragType.bind(n)),a.$set("draggable",!0)}}}]).controller("DragContainerController",["$dragging",function(e){var r=this;r.init=function(e){r.el=e},r.handleDragStart=function(a){a.originalEvent&&(a=a.originalEvent),a.dataTransfer.setData(r.type,r.data),a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect="move",r.el.addClass("drag-container-active"),r.dragging=!0,e.setData(r.data),e.setType(r.type)},r.handleDragEnd=function(a){a.originalEvent&&(a=a.originalEvent),n.element(a.target).removeClass("drag-active"),r.el.removeClass("drag-container-active"),r.dragging=!1,e.setData(null),e.setType(null)},r.updateDragData=function(a){r.data=a,r.dragging&&e.setData(r.data)},r.updateDragType=function(a){r.type=a||"text/x-drag-data",r.dragging&&e.setType(r.type)}}]).directive("dropContainer",["$document","$parse",function(e,r){return{restrict:"A",require:"dropContainer",controller:"DropContainerController",controllerAs:"dropContainer",link:function(a,n,t,o){var i=function(e){return function(r){return a.$apply(function(){return o["handle"+e](r)})}},l=o.handleDragEnd.bind(o),c=i("DragEnter"),g=i("DragOver"),d=i("DragLeave"),p=i("Drop");o.init(n,a,{onDragEnter:r(t.onDragEnter),onDragOver:r(t.onDragOver),onDragLeave:r(t.onDragLeave),onDrop:r(t.onDrop)}),n.on("dragenter",c),n.on("dragover",g),n.on("dragleave",d),n.on("drop",p),a.$watch(t.accepts,o.updateMimeTypes.bind(o)),e.on("dragend",l),a.$on("$destroy",function(){e.off("dragend",l)})}}}]).controller("DropContainerController",["$dragging",function(e){var r=this,a={},t="center top top-right right bottom-right bottom bottom-left left top-left".split(" ");r.init=function(e,a,n){r.el=e,r.scope=a,r.callbacks=n,r.accepts=["text/x-drag-data"],r.el.addClass("drop-container")},r.addDropTarget=function(e,r){if(t.indexOf(e)<0)throw new Error("Invalid anchor point "+e);if(a[e])throw new Error("Duplicate drop targets for the anchor "+e);a[e]=r},r.removeDropTarget=function(e){a[e]&&a[e]===e&&(r.activeTarget=null),delete a[e]},r.updateMimeTypes=function(e){e||(e=["text/x-drag-data"]),n.isArray(e)||(e=[e]),r.accepts=e},r.updateDragTarget=function(t,o){t.originalEvent&&(t=t.originalEvent);var i=null,l=null,c=Number.MAX_VALUE,g=r.activeAnchor,d=r.activeTarget;o||n.forEach(a,function(e,a){var n=r.el[0].offsetWidth,o=r.el[0].offsetHeight,g=n/2,d=o/2;a.indexOf("left")>=0&&(g=0),a.indexOf("top")>=0&&(d=0),a.indexOf("right")>=0&&(g=n),a.indexOf("bottom")>=0&&(d=o);var p=Math.pow(g-t.offsetX,2)+Math.pow(d-t.offsetY,2);c>p&&(l=a,i=e,c=p)}),r.activeAnchor=l,r.activeTarget=i;var p={$event:t,data:e.getData(),anchor:l,target:i,prevAnchor:g,prevTarget:d};return d!==i&&(d&&(r.el.removeClass("drop-container-active-"+g),d.handleDragLeave(p)),i&&(r.el.addClass("drop-container-active-"+l),i.handleDragEnter(p))),p},r.handleDragEnter=function(a){if(a.originalEvent&&(a=a.originalEvent),!r.accepts||r.accepts.indexOf(e.getType())>=0){a.preventDefault();var n=r.updateDragTarget(a);r.el.children().css({"pointer-events":"none"}),r.el.addClass("drop-container-active"),r.callbacks.onDragEnter&&r.callbacks.onDragEnter(r.scope,n)}},r.handleDragOver=function(a){if(a.originalEvent&&(a=a.originalEvent),!r.accepts||r.accepts.indexOf(e.getType())>=0){a.preventDefault();var n=r.updateDragTarget(a);n.target&&n.target.handleDragOver(n),r.callbacks.onDragOver&&r.callbacks.onDragOver(r.scope,n)}},r.handleDragLeave=function(e){e.originalEvent&&(e=e.originalEvent);var a=r.updateDragTarget(e,!0);r.el.children().css({"pointer-events":null}),r.el.removeClass("drop-container-active"),r.callbacks.onDragLeave&&r.callbacks.onDragLeave(r.scope,a)},r.handleDragEnd=function(e){e.originalEvent&&(e=e.originalEvent),r.updateDragTarget(e,!0),r.el.children().css({"pointer-events":null}),r.el.removeClass("drop-container-active")},r.handleDrop=function(a){if(a.originalEvent&&(a=a.originalEvent),!r.accepts||r.accepts.indexOf(e.getType())>=0){a.preventDefault();var n=r.updateDragTarget(a);n.target&&n.target.handleDrop(n),r.callbacks.onDrop&&r.callbacks.onDrop(r.scope,n),this.handleDragEnd(a)}}}]).directive("dropTarget",["$parse",function(e){return{restrict:"A",require:["^dropContainer","dropTarget"],controller:"DropTargetController",controllerAs:"dropTarget",link:function(r,a,n,t){var o=t[0],i=t[1],l=n.dropTarget||"center",c=o.removeDropTarget.bind(o,l);a.addClass("drop-target drop-target-"+l),i.init(a,r,{onDragEnter:e(n.onDragEnter),onDragOver:e(n.onDragOver),onDragLeave:e(n.onDragLeave),onDrop:e(n.onDrop)}),o.addDropTarget(l,i),r.$on("$destroy",c)}}}]).controller("DropTargetController",[function(){var e=this;e.init=function(r,a,n){e.el=r,e.scope=a,e.callbacks=n},e.handleDragEnter=function(r){e.el.addClass("drop-target-active"),e.callbacks.onDragEnter&&e.callbacks.onDragEnter(e.scope,r)},e.handleDragOver=function(r){e.callbacks.onDragOver&&e.callbacks.onDragOver(e.scope,r)},e.handleDragLeave=function(r){e.el.removeClass("drop-target-active"),e.callbacks.onDragLeave&&e.callbacks.onDragLeave(e.scope,r)},e.handleDrop=function(r){e.callbacks.onDrop&&e.callbacks.onDrop(e.scope,r)}}])},function(e){e.exports=angular}]);